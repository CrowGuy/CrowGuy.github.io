<html>
  <head>
    <title>Bannerocity - Personalized Online Sky Banners</title>
	<link rel="stylesheet" type="text/css" href="./css/bannerocity.css" />
	<script type="text/javascript">
	  //onblur 失去焦點的事件；即onfocus的相反事件
	  /* 正規式(regular expression)
	     正規式總是以斜線起始和結束  / + Expression + /
		 中介字元(metacharacter):用於連接文字與數字，建立高度描述性的文字樣式
		   ex: .  比對任何字元，換行字元除外
		       \s 比對空格，包含空白字元、tab、換行字元、return/enter
			   \d 比對任何數字字元
			   ^  字串需以樣式起始，符合樣式的字串前不能有其他文字
			   \w 比對任何文數字元
			   $  字串需以樣式結束
	     量詞(qiantifier):量詞前為子樣式，主要用來控制子樣式出現的次數
		   ex: *  量詞前的子樣式必須出現0或多次
		       {n}量詞前的子樣式必須出現恰好n次
			   +  量詞前的子樣式必須出現1或多次
			   ?  量詞前的子樣式必須出現0或1次
			   
	  */
      function validateRegEx(regex, input, helpText, helpMessage) {
        // See if the input data validates OK
        if (!regex.test(input)) {
          // The data is invalid, so set the help message and return false
          if (helpText != null) // 確認helpText組件是否存在
            helpText.innerHTML = helpMessage;
          return false;
        }
        else {
          // The data is OK, so clear the help message and return true
          if (helpText != null)
            helpText.innerHTML = "";
          return true;
        }
      }

      function validateNonEmpty(inputField, helpText) {
        // See if the input value contains any text
        return validateRegEx(/.+/, inputField.value, helpText, "Please enter a value.");
      }

      function validateLength(minLength, maxLength, inputField, helpText) {
        // See if the input value contains at least minLength but no more than maxLength characters
        return validateRegEx(new RegExp("^.{" + minLength + "," + maxLength + "}$"), inputField.value, helpText, "Please enter a value " + minLength + " to " + maxLength + " characters in length.");
      }

      function validateZipCode(inputField, helpText) {
        // First see if the input value contains data
        if (!validateNonEmpty(inputField, helpText))
          return false;

        // Then see if the input value is a ZIP code
        return validateRegEx(/^\d{5}$/, inputField.value, helpText, "Please enter a 5-digit ZIP code.");
      }

      function validateDate(inputField, helpText) {
        // First see if the input value contains data
        if (!validateNonEmpty(inputField, helpText))
          return false;

        // Then see if the input value is a date
        return validateRegEx(/^\d{2}\/\d{2}\/(\d{2}|\d{4})$/, inputField.value, helpText, "Please enter a date (for example, 01/14/1975).");
      }

      function validatePhone(inputField, helpText) {
        // First see if the input value contains data
        if (!validateNonEmpty(inputField, helpText))
          return false;

        // Then see if the input value is a phone number
        return validateRegEx(/^\d{3}-\d{3}-\d{4}$/, inputField.value, helpText, "Please enter a phone number (for example, 123-456-7890).");
      }

      function validateEmail(inputField, helpText) {
        // First see if the input value contains data
        if (!validateNonEmpty(inputField, helpText))
          return false;

        // Then see if the input value is an email address
        return validateRegEx(/^[\w\.-_\+]+@[\w-]+(\.\w{2,3})+$/, inputField.value, helpText, "Please enter an email address (for example, johndoe@acme.com).");
      }

      function placeOrder(form) {
	    // 各個表單欄位及輔助訊息組件，均使用陣列表示法、透過form物件存取
        if (validateLength(1, 32, form["message"], form["message_help"]) &&
          validateZipCode(form["zipcode"], form["zipcode_help"]) &&
          validateDate(form["date"], form["date_help"]) &&
          validateNonEmpty(form["name"], form["name_help"]) &&
          validatePhone(form["phone"], form["phone_help"]) &&
          validateEmail(form["email"], form["email_help"])) {
          // Submit the order to the server
          form.submit();
        } 
		else {
          alert("I'm sorry but there is something wrong with the order information.");
        }
      }
    </script>
	
  </head>
  
  <body onload="document.getElementById('message').focus()">
    <div class="heading">
      <img id="logo" src="./img/logo.png" alt="Bannerocity" />
    </div>

    <form name="orderform" action="bannerocity.php" method="POST">
      <div class="field">
        Enter the banner message:
        <input id="message" name="message" type="text" size="32" onblur="validateLength(1, 32, this, document.getElementById('message_help'))" />
        <span id="message_help" class="help"></span>
      </div>
      <div class="field">
        Enter ZIP code of the location:
        <input id="zipcode" name="zipcode" type="text" size="5" onblur="validateZipCode(this, document.getElementById('zipcode_help'))" />
        <span id="zipcode_help" class="help"></span>
      </div>
      <div class="field">
        Enter the date for the message to be shown:
        <input id="date" name="date" type="text" size="10" onblur="validateDate(this, document.getElementById('date_help'))" />
        <span id="date_help" class="help"></span>
      </div>
      <div class="field">
        Enter your name:
        <input id="name" name="name" type="text" size="32" onblur="validateNonEmpty(this, document.getElementById('name_help'))" />
        <span id="name_help" class="help"></span>
      </div>
      <div class="field">
        Enter your phone number:
        <input id="phone" name="phone" type="text" size="12" onblur="validatePhone(this, document.getElementById('phone_help'))" />
        <span id="phone_help" class="help"></span>
      </div>
      <div class="field">
        Enter your email address:
        <input id="email" name="email" type="text" size="32" onblur="validateEmail(this, document.getElementById('email_help'))" />
        <span id="email_help" class="help"></span>
      </div>
      <input type="button" value="Order Banner" onclick="placeOrder(this.form);" />
    </form>
  </body>
</html>